<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.uoa.ecommerce.mapper.CourseClazzMapper">

    <!-- 根据班级ID查询课程 -->
    <select id="getCourseByClazz" resultType="com.uoa.ecommerce.vo.CourseClazzVO">
        SELECT
            cc.uid AS uid,
            c.uid AS courseUid,
            c.name AS courseName,
            cl.uid AS classUid,
            cl.name AS className
        FROM
            course_class cc
                LEFT JOIN course c ON cc.course_uid = c.uid
                LEFT JOIN class cl ON cc.class_uid = cl.uid
        WHERE
            cc.is_deleted = 0
          AND c.is_deleted = 0
          AND cl.is_deleted = 0
          AND cc.class_uid = #{classUid}
    </select>

    <!-- 根据课程ID查询班级 -->
    <select id="getClazzByCourse" resultType="com.uoa.ecommerce.vo.CourseClazzVO">
        SELECT
            cc.uid AS uid,
            c.uid AS courseUid,
            c.name AS courseName,
            cl.uid AS classUid,
            cl.name AS className
        FROM
            course_class cc
                LEFT JOIN course c ON cc.course_uid = c.uid
                LEFT JOIN class cl ON cc.class_uid = cl.uid
        WHERE
            cc.is_deleted = 0
          AND c.is_deleted = 0
          AND cl.is_deleted = 0
          AND cc.course_uid = #{courseUid}
    </select>

</mapper>
